config:
    name: testcase description
    variables: {}
    verify: false
teststeps:
-   name: /login
    request:
        cookies:
            SESSION: ODI0MTRiYzAtOTc1Ni00OWViLWFkMzUtMjg0ZTM2MGJmNTA3
        headers:
            Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Cache-Control: no-cache
            Connection: keep-alive
            Cookie: SESSION=ODI0MTRiYzAtOTc1Ni00OWViLWFkMzUtMjg0ZTM2MGJmNTA3
            Host: test:8083
            Pragma: no-cache
            Upgrade-Insecure-Requests: '1'
            User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/83.0.4103.116 Mobile Safari/537.36
        method: GET
        url: http://test:8083/login
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - text/html;charset=UTF-8
-   name: /index.html
    request:
        cookies:
            SESSION: ODI0MTRiYzAtOTc1Ni00OWViLWFkMzUtMjg0ZTM2MGJmNTA3
        data:
            _csrf: 25c8b310-4df1-4c2f-8468-5188fa9ffae0
            password: '123321'
            username: huang
        headers:
            Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Cache-Control: no-cache
            Connection: keep-alive
            Content-Length: '73'
            Content-Type: application/x-www-form-urlencoded
            Cookie: SESSION=ODI0MTRiYzAtOTc1Ni00OWViLWFkMzUtMjg0ZTM2MGJmNTA3
            Host: test:8083
            Origin: http://test:8083
            Pragma: no-cache
            Referer: http://test:8083/login
            Upgrade-Insecure-Requests: '1'
            User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/83.0.4103.116 Mobile Safari/537.36
        method: POST
        url: http://test:8083/index.html
    validate:
    -   eq:
        - status_code
        - 302
-   name: /index.html
    request:
        cookies:
            SESSION: M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
        headers:
            Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Cache-Control: no-cache
            Connection: keep-alive
            Cookie: SESSION=M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
            Host: test:8083
            Pragma: no-cache
            Referer: http://test:8083/login
            Upgrade-Insecure-Requests: '1'
            User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/83.0.4103.116 Mobile Safari/537.36
        method: GET
        url: http://test:8083/index.html
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - text/html
-   name: /voter/display
    request:
        cookies:
            SESSION: M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
        headers:
            Accept: application/json, text/javascript, */*; q=0.01
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Cache-Control: no-cache
            Connection: keep-alive
            Cookie: SESSION=M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
            Host: test:8083
            Pragma: no-cache
            Referer: http://test:8083/index.html
            User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/83.0.4103.116 Mobile Safari/537.36
            X-Requested-With: XMLHttpRequest
        method: GET
        url: http://test:8083/voter/display
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - '0'
-   name: /voter/csrftoken
    request:
        cookies:
            SESSION: M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
        headers:
            Accept: '*/*'
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Cache-Control: no-cache
            Connection: keep-alive
            Cookie: SESSION=M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
            Host: test:8083
            Pragma: no-cache
            Referer: http://test:8083/index.html
            User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/83.0.4103.116 Mobile Safari/537.36
            X-Requested-With: XMLHttpRequest
        method: GET
        url: http://test:8083/voter/csrftoken
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - text/plain;charset=UTF-8
-   name: /voter/play
    request:
        cookies:
            SESSION: M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
        data:
            form: '[{"name":"1","value":"1"},{"name":"1","value":"2"},{"name":"2","value":"4"}]'
        headers:
            Accept: application/json, text/javascript, */*; q=0.01
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Cache-Control: no-cache
            Connection: keep-alive
            Content-Length: '167'
            Content-Type: application/x-www-form-urlencoded; charset=UTF-8
            Cookie: SESSION=M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
            Host: test:8083
            Origin: http://test:8083
            Pragma: no-cache
            Referer: http://test:8083/index.html
            User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/83.0.4103.116 Mobile Safari/537.36
            X-CSRF-TOKEN: 0d26c46e-0163-4966-ba2e-b27bf6b78316
            X-Requested-With: XMLHttpRequest
        method: POST
        url: http://test:8083/voter/play
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - '0'
    -   eq:
        - body.userId
        - 1
    -   eq:
        - body.username
        - huang
-   name: /voter/play
    request:
        cookies:
            SESSION: M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
        headers:
            Accept: application/json, text/javascript, */*; q=0.01
            Accept-Encoding: gzip, deflate
            Accept-Language: zh-CN,zh;q=0.9
            Cache-Control: no-cache
            Connection: keep-alive
            Cookie: SESSION=M2UwOWRjMjEtZmZhMC00NDA1LTg1MjQtNzNlYjBmMTU4NWVi
            Host: test:8083
            Pragma: no-cache
            Referer: http://test:8083/index.html
            User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/83.0.4103.116 Mobile Safari/537.36
            X-CSRF-TOKEN: 0d26c46e-0163-4966-ba2e-b27bf6b78316
            X-Requested-With: XMLHttpRequest
        method: GET
        url: http://test:8083/voter/play
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json;charset=UTF-8
    -   eq:
        - body.code
        - '0'
